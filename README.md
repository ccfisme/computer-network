

## 学习原因
*写这个笔记的原因是因为实训做的博客中又出现了只在前端就能访问服务器的状况，对于这种请求访问很疑惑，有时候在前端，有时候在后端，还有一个吊毛request对象不知道是啥。后来又学了一个[Python的套接字socket](https://cloud.tencent.com/developer/article/1078620)，让我感觉这是我穿起来网络，把整个客户端服务器连成一个电脑的机会，所以就socket展开学习*  

> 注：对于socket的函数学习可以参考https://www.hiyu.space/2021/02/28/C-socket%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/

## 什么是分布式？

就是一个系统，有多个不同地区的计算机构成，这些计算机在网络连接的时候可以看成是一台电脑

## 分布式长什么样？

具体可以参考这篇文章：https://blog.csdn.net/weixin_42449639/article/details/103376251 ，里面有好几个比如c/s，或者p2p，或者远程连接的样式，现在主要用一用远程连接  
![image](https://user-images.githubusercontent.com/74129445/148672218-c1662349-a649-4c15-8e1b-89e8dcfd2217.png)  

注：一般情况下，函数只能返回一个返回值

## 什么是socket?
为了与远程计算机进行数据传输，需要连接到因特网，而socket就是用来连接到因特网的工具。  


网络编程就是编写程序使两台联网的计算机相互交换数据。这就是全部内容了吗？是的！网络编程要比想象中的简单许多。那么，这两台计算机之间用什么传输数据呢？首先需要物理连接。如今大部分计算机都已经连接到互联网，因此不用担心这一点。在此基础上，只需要考虑如何编写数据传输程序。但实际上这点也不用愁，因为操作系统已经提供了 socket。即使对网络数据传输的原理不太熟悉，我们也能通过 socket 来编程。  

 

FTP概述

![image](https://user-images.githubusercontent.com/74129445/148685033-33f3bbbc-5446-49e2-b019-d5df84852cb8.png)  
![image](https://user-images.githubusercontent.com/74129445/148685049-46eac3c4-e5fd-4abf-9810-cfe9f2f668a6.png)  

FTP基本工作原理简直就是一个socket  

![image](https://user-images.githubusercontent.com/74129445/148685116-5db456cc-cafd-4372-86ba-b82d7be015a2.png)  




## socket与TCP三次握手的关系？

socket是用来客户端和服务器之间建立连接的一个组建，建立连接的过程是三次握手的过程，客户端向服务器发送消息，问服务器在不在，客户端要和它进行连接了，服务器接收到后，服务器向浏览器发送消息表明自己在，并问客户端能收到服务器发送的消息吗？客户端接收到消息后，再向服务器发送消息，表明能收到服务器发来消息。  

这三次握手的目的在于验证服务器浏览器之间两者的收，发功能是否正常。

## socket与www的关系？  

www（也就是web服务器和客户端浏览器）的主要作用是c/s交互  
![image](https://user-images.githubusercontent.com/74129445/148787667-305f5eda-77bf-4ee2-98d7-4735d49365d8.png)  

> HTML语言是WWW服务的信息组织形式，用于定义在WWW服务器中存储的信息格式；HTTP是WWW服务使用的应用层协议，用于实现WWW客户机与WWW服务器之间的通信 



socket 的典型应用就是 Web 服务器和浏览器：浏览器获取用户输入的 URL，向服务器发起请求，服务器分析接收到的 URL，将对应的网页内容返回给浏览器，浏览器再经过解析和渲染，就将文字、图片、视频等元素呈现给用户。学习 socket，也就是学习计算机之间如何通信，并编写出实用的程序。这和计算机网络中6.2的文件传输协议FTP有些类似   



## socket与http的区别？

两者是并列的，或者说，代码大致相同
 * HTTP是短连接，Socket(基于TCP协议的)是长连接。尽管HTTP1.1开始支持持久连接，但仍无法保证始终连接。而Socket连接一旦建立TCP三次握手，除非一方主动断开，否则连接状态一直保持。
 * HTTP连接服务端无法主动发消息，Socket连接双方请求的发送先后限制。这点就比较重要了，因为它将决定二者分别适合应用在什么场景下。**HTTP采用“请求-响应”机制**，在客户端还没发送消息给服务端前，服务端无法推送消息给客户端。必须满足客户端发送消息在前，服务端回复在后。Socket连接双方类似peer2peer的关系，一方随时可以向另一方喊话。

主要参考https://blog.csdn.net/SandyLoo/article/details/80180120    

# 什么时候该用HTTP，什么时候该用socket
 
这个问题的提出是很自然而然的。当你接到一个与另一方的网络通讯需求，自然会考虑用HTTP还是用Socket。
- 用HTTP的情况：双方不需要时刻保持连接在线，比如客户端资源的获取、文件上传等
- 用Socket的情况：大部分即时通讯应用(QQ、微信)、聊天室、苹果APNs等


## HTTP版本简介
这里我把HTTP版本简单分为三类：1.1之前，1.1，2.0，针对这三类做个主要差异的介绍：
> HTTP 1.1之前
- 不支持持久连接。一旦服务器对客户端发出响应就立即断开TCP连接
- 无请求头跟响应头
- 客户端的前后请求是同步的。下一个请求必须等上一个请求从服务端拿到响应后才能发出，有点类似多线程的同步机制。
---------
>  HTTP 1.1(主流版本)
与1.1之前的版本相比，做了以下性能上的提升
- 增加请求头跟响应头
- 支持持久连接。客户端通过请求头中指定**Connection**为**keep-alive**告知服务端不要在完成响应后立即释放连接。HTTP是基于TCP的，在HTTP 1.1中一次TCP连接可以处理多次HTTP请求
- 客户端不同请求之间是异步的。下一个请求不必等到上一个请求回来后再发出，而可以连续发出请求，有点类似多线程的异步处理。
---------
> HTTP 2.0
本着向下兼容的原则，1.1版本有的特性2.0都具备，也使用相同的API。但是2.0将只用于https网址。由于2.0的普及还需要比较长的一段时间，这里不展开，更多新特性请参考[这篇文章]。
 
我们重点关注一下当前1.1版本所做几点改变。支持持久连接有什么好处呢？HTTP是基于TCP连接的，如果连接被频繁地启动然后断开就会花费很多资源在TCP三次握手以及四次挥手上，效率低下。以请求一个网页为例，我们知道，一个html网页上的图片资源并不是直接嵌入在网页上，而只是提供url，图片仍需要额外发HTTP 请求去下载。一个网页从请求到最终加载到本地往往需要经过过个HTTP请求。在1.1版本之前请求一个网页就需要发生多次"握手-挥手"的过程，每次连接之间相互独立；而1.1及之后的版本最少只需要一次就够。
再来就是请求异步，其好处参考多线程异步处理，在此不展开。

[在进行c/s交互时，客户端向服务器请求超链接为get方法，请求表单为post方法。](https://blog.csdn.net/songlixing/article/details/6945083)

## [客户端服务端交互概述](https://developer.mozilla.org/zh-CN/docs/learn/Server-side/First_steps/Client-Server_overview)  

根据http1.1，服务端不要在完成响应后立即释放连接，所以在进行第一次握手时，用get和post、put、delete等方法来定义请求行为，请求的响应如下。状态码"302 FOUND"告知浏览器，服务端已收到它提交的post请求，然后第二次握手，它必须再发出第二个HTTP请求来加载Location字段中指定的页面。对于其他方面的信息含义，则与GET请求的响应信息类似。然后生成一个[request对象](https://blog.csdn.net/qq_42705210/article/details/92654789)来处理传来的参数，具体处理的函数看文章。  

## 为什么自己电脑连Tomcat变成服务器后生成的网页在客户端只能在局域网连？  

目前太困，不解决，留两篇文章  

- [局域网访问外网](https://network.51cto.com/art/202012/635141.htm)
- [局域网访问另一个局域网](http://www.icodeguru.com/13/232.html)




